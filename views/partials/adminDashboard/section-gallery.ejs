<div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="text-white fw-bold m-0">Gallery Manager</h3>
    
    <button class="btn btn-primary-glow" data-bs-toggle="modal" data-bs-target="#uploadImageModal">
        <i class="bi bi-cloud-upload-fill me-2"></i> Upload New Image
    </button>
</div>

<div class="row g-4">
    <% if(galleryImages.length > 0) { %>
        <% galleryImages.forEach(img => { %>
            <div class="col-md-4 col-lg-3">
                <div class="panel p-0 h-100 overflow-hidden position-relative">
                    
                    <div style="height: 200px; overflow: hidden;">
                        <img src="<%= img.imageUrl %>" class="w-100 h-100" style="object-fit: cover; transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1.0)'" alt="Gallery Image">
                    </div>

                    <form action="/admin/gallery/delete/<%= img._id %>" method="POST" class="position-absolute top-0 end-0 m-2" onsubmit="return confirm('Delete this image?')">
                        <button type="submit" class="btn btn-sm btn-danger rounded-circle shadow-lg" style="width: 32px; height: 32px; padding: 0;">
                            <i class="bi bi-trash-fill" style="font-size: 0.8rem;"></i>
                        </button>
                    </form>

                    <div class="p-3 text-center border-top border-secondary">
                        <small class="fw-bold text-white d-block text-truncate">
                            <%= img.title || 'Untitled Image' %>
                        </small>
                        <small class="text-muted" style="font-size: 0.7rem;">
                            <i class="bi bi-clock me-1"></i>Uploaded recently
                        </small>
                    </div>
                </div>
            </div>
        <% }) %>
    <% } else { %>
        <div class="col-12">
            <div class="panel p-5 text-center text-muted">
                <i class="bi bi-images fs-1 mb-3 d-block opacity-50"></i>
                <p class="mb-0">Gallery is empty. Upload photos to show them here.</p>
            </div>
        </div>
    <% } %>
</div>

<div class="modal fade" id="uploadImageModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="background-color: #0f172a; border: 1px solid rgba(255,255,255,0.1);">
            
            <div class="modal-header border-secondary">
                <h5 class="modal-title fw-bold text-white">
                    <i class="bi bi-image-fill me-2 text-primary"></i>Upload to Gallery
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <form action="/admin/gallery/add" method="POST">
                <div class="modal-body p-4">
                    
                    <div class="mb-4">
                        <label class="form-label text-muted small">Image URL</label>
                        <div class="input-group">
                            <span class="input-group-text bg-dark border-secondary text-muted"><i class="bi bi-link-45deg"></i></span>
                            <input type="url" name="imageUrl" class="form-control" placeholder="https://example.com/image.jpg" required>
                        </div>
                        <div class="form-text text-white-50 small">Paste a direct link to the image (JPG/PNG).</div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label text-muted small">Caption / Event Name</label>
                        <input type="text" name="title" class="form-control" placeholder="e.g. Annual Sports Day 2026">
                    </div>

                </div>

                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-outline-light rounded-pill px-4" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary rounded-pill px-4 fw-bold">
                        <i class="bi bi-cloud-arrow-up-fill me-2"></i>Upload
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
